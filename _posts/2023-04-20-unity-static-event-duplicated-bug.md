---
title: (Bug Fix) Unity Static Event 중복 할당
date : 2023-04-20
categories: [Unity, Bug Fix]
tags: [유니티]
---

# 문제
Start에서 구독하고 따로 해제하지 않은 이벤트가
에디터에서 유니티 SceneManager.onSceneLoaded가 씬 로드시 여러번 호출됨.
처음 플레이 시에는 한번 호출되나, 정지 후 플레이 시 여러번 호출됨이 확인됨.
# 원인 탐색
1. onSceneLoad가 실행되는 조건인 Scene Load가 여러번 실행되는가? X
2. onSceneLoad에 이벤트를 중복으로 할당했는가? - 스크립트 상에선 중복 할당하지 않음 (Start에서 할당하고, 따로 구독 해제는 하지 않음)

위 조건에도 버그 원인을 알지 못해서, 원래 방식으로 OnEnable, OnDisable에 이벤트 구독, 구독 해제를 호출했다.
그러자 버그가 해결되어, 혹시나 Static 필드가 플레이 시 초기화되지 않는지를 테스트하기 위해,
플레이를 여러번 하여 테스트 해보니, 플레이 수에 따라 이벤트 호출 횟수도 그만큼 늘어남이 확인되었다.
어째서 이전엔 플레이마다 늘어나지 않았는지 곰곰히 생각해보니, 테스트 중 버그를 잡기 위해 코드를 수정했는데, 이때 스크립트가 다시 컴파일되어 정적 필드가 초기화되어 버그 원인 특정에 혼란을 준 것 같다.

# 원인
Play 시 초기화될거라 생각했던 Static Event 필드가 초기화되지 않았다.

# 해결법
OnDisable에 이벤트 해제를 호출한다.
